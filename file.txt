import './style.css';
// import { likeCounter } from '../modules/involvement.js';

const showApi = 'https://api.tvmaze.com/search/shows?q=girls';

const movieContainer = document.querySelector('.movie_list');

document.addEventListener('DOMContentLoaded', () => {
  const fetchShows = async () => {
    const res = await fetch(showApi);
    const allShows = await res.json();
    console.log("line 12", allShows)

    allShows.forEach((e) => {
      const allMovies = document.createElement('div');
      allMovies.className = 'movie';

      if(e.show.image !== null) {
        allMovies.innerHTML = `
        <div>
        <img src="${e.show.image.original}" alt="Movie">
        <p>Title: ${e.show.name}</p>
        <div class="counter">
            <i class="fa fa-thumbs-up" aria-hidden="true"></i> <div id="likes" class="likes"></div>
            <i class="fa fa-comment" aria-hidden="true"></i>
        </div>
        </div>
        `;
      }

     
      movieContainer.appendChild(allMovies);
    });
  };
  return fetchShows();
});

 const fetchLikes = async () => {
  const getLikes = await fetch('https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/wBpjy3Zy3kfv5qbqC9Ro/likes')
  const res = getLikes.json()
 
  return res;
 }


const updateLikes = async () => {
  await fetchLikes().then((resp) => {
    resp.forEach((e) => {
      console.log("line 43", e.likes)
      const likeCounter = document.querySelector('#likes');
      const countlikes = document.createElement('p')
      countlikes.innerText = `${e.likes} likes`
      likeCounter.appendChild(countlikes)
    })
  });
}
document.addEventListener('DOMContentLoaded', () => {
 updateLikes()
});
//  fetch('https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/wBpjy3Zy3kfv5qbqC9Ro/likes', {
//   method: 'POST',
//   body: JSON.stringify({
//     'item_id': 'item1'
//   }),
//   headers: {
//     'Content-type': 'application/json; charset=UTF-8',
//   },
// })
//   .then((response) => response.json())
//   .then((json) => console.log(json));

